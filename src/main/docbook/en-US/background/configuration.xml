<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../jsr303-tck.ent">
%BOOK_ENTITIES;
]>
<chapter id="configuration">
  <title>Configuration</title>

  <para>This chapter lays out how to configure the TCK Harness by specifying
  the SPI implementation classes, defining the target container connection
  information, and various other switches. You then learn how to setup a TCK
  runner project that executes the the TCK test suite, putting these settings
  into practice. </para>

  <section id="tck-harness-properties">
    <title>TCK Harness Properties</title>

    <para>The test harness allows the test suite to be launched in a pluggable
    fashion using Arquillian. In order to execute the TCK, there must be an
    arquillian.xml file specifying the container adapter ro use. TODO,
    examples</para>
  </section>

  <section>
    <title>Configuring TestNG to execute the TCK</title>

    <para>The test harness is built atop TestNG, and it's TestNG that is
    responsible for selecting the tests to execute, the order of execution,
    and reporting the results. Detailed TestNG documentation can be found at
    <ulink
    url="http://testng.org/doc/documentation-main.html">testng.org</ulink>.</para>

    <para>The <literal>tck-tests.xml</literal> artifact provided in the TCK
    distribution must be run by TestNG 5.9 (described by the TestNG
    documenation as "with a <literal>testng.xml</literal> file") unmodified
    for an implementation to pass the TCK. This file also allows tests to be
    excluded from a run:</para>

    <programlisting>&lt;suite name="JSR-303 TCK" verbose="2"&gt;
   &lt;test name="JSR-303 TCK"&gt;
      ...
      &lt;classes&gt;
         &lt;class name="org.hibernate.jsr303.tck.tests.bootstrap.ValidationProviderTest"&gt;
            &lt;methods&gt;
               &lt;exclude name="testFirstMatchingValidationProviderResolverIsReturned"/&gt;
            &lt;/methods&gt;
         &lt;/class&gt;
      &lt;/classes&gt;
      ...
   &lt;/test&gt;
&lt;/suite&gt;</programlisting>

    <para>TestNG provides extensive reporting information. Depending on the
    build tool or IDE you use, the reporting will take a different format.
    Please consult the TestNG documentation and the tool documentation for
    more information.</para>
  </section>

  <section>
    <title>Configuring your build environment to execute the TCK</title>

    <para>It's beyond the scope of this guide to describe in how to set up
    your build environment to run the TCK. The JBoss Test Harness guide
    describes how Bean Validation uses Maven 2 to execute the Bean Validation
    TCK. See <xref linkend="test-suite-runner"/>. The TestNG documentation
    provides extensive information on launching TestNG using the Java, Ant,
    Eclipse or IntellJ IDEA.</para>
  </section>
</chapter>
